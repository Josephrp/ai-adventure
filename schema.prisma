generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model Adventure {
  id               String   @id @default(uuid())
  creatorId        String
  createdBy        String
  createdAt        DateTime @default(now())
  name             String   @default("Epic Quest")
  description      String   @default("Set the scene for your adventure, create your character, and dive into an adventure completely unique to you.")
  agentVersion     String   @default("ai-adventure")
  agentConfig      Json?
  agentDevConfig   Json?
  shortDescription String   @default("A custom pixel art style adventure.")
  agents           Agents[]
}

model Agents {
  id          Int        @id @default(autoincrement())
  ownerId     String
  agentUrl    String
  handle      String     @default("agent")
  createdAt   DateTime   @default(now())
  Adventure   Adventure? @relation(fields: [adventureId], references: [id])
  adventureId String?
}

model Subscriptions {
  id             Int    @id @default(autoincrement())
  ownerId        String
  stripeId       String
  priceId        String
  subscriptionId String
}

model TopUps {
  id              Int    @id @default(autoincrement())
  ownerId         String
  agentUrl        String
  amountPaidCents Int // Amount paid
  creditIncrease  Int // Energy Added
  reference       String // Stripe reference
}
